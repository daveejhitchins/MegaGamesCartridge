   10REM **** MEGA GAMES CARTRIDGE BOOT1E - 1V0 - 09-01-17 - DEJH ****   11REM **** Save as BOOT1 for production after packing!   20:   21REM **** Flush sound channel 3   22*FX21,7   23:   30REM **** Set Screen MODE   40MODE6   50:   60REM **** Turn off cursor   70VDU23,1,0;0;0;0;   80:   90REM **** Turn on inverted text  100VDU17,0,17,129  110:  120REM **** Print header text - centered  130PRINTTAB(2,3);" Loading Mega Games Cartridge  MENU ":PRINT  140:  150REM **** Turn off inverted text  160VDU17,1,17,128  170:  180REM **** Set variables etc  190PROCSetVariables  200:  210REM **** If no index found print and exit  220IF SLOT%=1 THEN PRINTTAB(16,6)"No INDEX!":END  230:  240REM **** Disable all but BASIC and the MGC  250FOR R%=0 TO 15  260:  270IF R%<>BASIC% AND R%<>SLOT% THEN ROMTable%?R%=0  280:  290NEXT R%  300:  310REM **** Claim Absolute workspace @ &E00  330*FX143,10  340:  350REM **** Claim NMI space @ &D00  370*FX143,12,255  380:  420REM **** Load FASTD @ &E00  430*LOAD FASTD  440:  450REM **** Run the menu  460CHAIN "MENU"  470:  480END  490:  500REM **** Set variables etc  510REM **** Add m/c loader Assembly in this procedure  520DEFPROCSetVariables  530:  540REM **** Get ROM table location  550ROMTable%=?&23A  560:  570REM **** Get the BASIC ROM location  580BASIC%=?&24B AND 15  590:  600REM **** Set slot to 1 - indicating no index  610SLOT%=1  620:  630REM **** Fetch a byte from a ROM location  640DIMMC%35:REM Save 10 bytes  650:  660REM **** Start of m/c  670P%=MC%  680[OPT 0   \REM Don't list  690JSR&FFB9 \REM Call OSRDRM, ROM# in Y address in &F6=(LSB) &F7=(MSB)  700RTS      \REM Return with byte in A  710]  720:  730REM **** OSRDRM Read a Byte from ROM  740REM **** Call with byte=FNrm(addr,rom)  750DEFFNrm(!&F6,Y%)=(USRMC%)AND&FF  760:  770REM **** Find which slot the cartridge is in  780IF FNrm(&8000,0)<>&17 THEN GOTO 810  790IF FNrm(&8001,0)=&A3 THEN SLOT%=0:ENDPROC  800:  810IF FNrm(&8000,2)<>&17 THEN ENDPROC  820IF FNrm(&8001,2)=&A3 THEN SLOT%=2:ENDPROC  830:  840END